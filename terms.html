<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Terms & Conditions | Eliman Worker</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="js/supabase.js"></script>

  <style>
    body { background:#0f172a; color:white; padding:20px;}
    .btn-disabled { opacity:0.4; pointer-events:none; }
  </style>
</head>

<body>

  <h1 id="title" class="text-3xl font-bold mb-4">Terms & Conditions</h1>

  <div id="content"
       class="bg-slate-800 p-4 rounded-xl h-80 overflow-y-scroll text-sm leading-relaxed mb-6">
  </div>

  <label class="flex items-center mb-6">
    <input id="agree" type="checkbox" class="mr-3">
    <span id="agreeLabel">I agree to the Terms & Conditions</span>
  </label>

  <button id="nextBtn"
          class="w-full bg-green-500 py-3 rounded-xl font-bold text-lg btn-disabled">
    Accept & Continue
  </button>

<script>
  const agree = document.getElementById("agree");
  const nextBtn = document.getElementById("nextBtn");
  const title = document.getElementById("title");
  const content = document.getElementById("content");
  const agreeLabel = document.getElementById("agreeLabel");

  const params = new URLSearchParams(window.location.search);
  const lang = params.get("lang") || "en";

  // üî• –í–ê–ñ–ù–û ‚Äî –ò–°–ü–†–ê–í–õ–ï–ù–û!
  const workerId = params.get("worker_id");  

  const i18n = {
    en: {
      title: "Terms & Conditions",
      agree: "I agree to the Terms & Conditions",
      next: "Accept & Continue",
      content: `
        <h2 class="font-bold text-lg mb-2">1. Platform Role</h2>
        <p class="mb-4">
          ELIMAN is a technology platform that connects customers with independent workers.
          ELIMAN does not employ workers and is not responsible for work performed by them.
        </p>

        <h2 class="font-bold text-lg mb-2">2. Independent Contractor</h2>
        <p class="mb-4">
          By using this platform, you agree you are an independent contractor, not an employee,
          agent, representative, or partner of ELIMAN. You are fully responsible for your taxes,
          insurance, tools, transportation, and business expenses.
        </p>

        <h2 class="font-bold text-lg mb-2">3. Liability & Risk</h2>
        <p class="mb-4">
          You work at your own risk. ELIMAN is not responsible for injuries, damages,
          property loss, accidents, legal claims, or disputes. You are responsible for your
          own insurance and safety.
        </p>

        <h2 class="font-bold text-lg mb-2">4. Job Acceptance</h2>
        <p class="mb-4">
          You may accept or decline any job. ELIMAN is not responsible for cancellations,
          customer behavior, or job conditions.
        </p>

        <h2 class="font-bold text-lg mb-2">5. Payments</h2>
        <p class="mb-4">
          Workers are paid after job completion. ELIMAN may apply service fees. Fraud or
          misconduct leads to suspension.
        </p>

        <h2 class="font-bold text-lg mb-2">6. Indemnification</h2>
        <p class="mb-4">
          You agree to indemnify and hold ELIMAN harmless from claims, lawsuits,
          damages, injuries, legal fees, or losses arising from your work or actions.
        </p>

        <p class="mb-4">
          By agreeing, you confirm you understand these Terms and accept all responsibility.
        </p>
      `
    },

    ru: {
      title: "–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è",
      agree: "–Ø –ø—Ä–∏–Ω–∏–º–∞—é –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è",
      next: "–ü—Ä–∏–Ω—è—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å",
      content: `
        <h2 class="font-bold text-lg mb-2">1. –†–æ–ª—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h2>
        <p class="mb-4">
          ELIMAN ‚Äî —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, —Å–æ–µ–¥–∏–Ω—è—é—â–∞—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏.
          ELIMAN –Ω–µ –Ω–∞–Ω–∏–º–∞–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∏ –Ω–µ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –≤—ã–ø–æ–ª–Ω—è–µ–º—É—é –∏–º–∏ —Ä–∞–±–æ—Ç—É.
        </p>

        <h2 class="font-bold text-lg mb-2">2. –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–¥—Ä—è–¥—á–∏–∫</h2>
        <p class="mb-4">
          –ò—Å–ø–æ–ª—å–∑—É—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ, —á—Ç–æ —è–≤–ª—è–µ—Ç–µ—Å—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–º,
          –∞ –Ω–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º –∏–ª–∏ –∞–≥–µ–Ω—Ç–æ–º ELIMAN. –í—ã —Å–∞–º–∏ –æ—Ç–≤–µ—á–∞–µ—Ç–µ –∑–∞ –Ω–∞–ª–æ–≥–∏, —Å—Ç—Ä–∞—Ö–æ–≤–∫—É,
          –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã.
        </p>

        <h2 class="font-bold text-lg mb-2">3. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏ —Ä–∏—Å–∫–∏</h2>
        <p class="mb-4">
          –í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –Ω–∞ —Å–≤–æ–π —Ä–∏—Å–∫. ELIMAN –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ç—Ä–∞–≤–º—ã, —É—â–µ—Ä–±, –ø–æ—Ç–µ—Ä–∏,
          –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–µ —Å–ª—É—á–∞–∏, —Å–ø–æ—Ä—ã –∏–ª–∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏. –í—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –∑–∞ —Å–≤–æ—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
        </p>

        <h2 class="font-bold text-lg mb-2">4. –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–æ–≤</h2>
        <p class="mb-4">
          –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞–∫–∞–∑—ã. ELIMAN –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–º–µ–Ω—ã,
          –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–ª–∏ —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã.
        </p>

        <h2 class="font-bold text-lg mb-2">5. –û–ø–ª–∞—Ç–∞</h2>
        <p class="mb-4">
          –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã. ELIMAN –º–æ–∂–µ—Ç –≤–∑–∏–º–∞—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä.
          –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ –≤–µ–¥—ë—Ç –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ.
        </p>

        <h2 class="font-bold text-lg mb-2">6. –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è</h2>
        <p class="mb-4">
          –í—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å –≤–æ–∑–º–µ—Å—Ç–∏—Ç—å ELIMAN —É–±—ã—Ç–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–µ—Ç–µ–Ω–∑–∏—è–º–∏, –∏—Å–∫–∞–º–∏,
          —Ç—Ä–∞–≤–º–∞–º–∏, —É—â–µ—Ä–±–æ–º –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏, –≤–æ–∑–Ω–∏–∫—à–∏–º–∏ –∏–∑-–∑–∞ –≤–∞—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.
        </p>

        <p class="mb-4">
          –ü—Ä–∏–Ω–∏–º–∞—è —É—Å–ª–æ–≤–∏—è, –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ, —á—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç–µ –∏ –Ω–µ—Å—ë—Ç–µ –ø–æ–ª–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.
        </p>
      `
    },

    es: {
      title: "T√©rminos y Condiciones",
      agree: "Acepto los T√©rminos y Condiciones",
      next: "Aceptar y Continuar",
      content: `
        <h2 class="font-bold text-lg mb-2">1. Rol de la plataforma</h2>
        <p class="mb-4">
          ELIMAN es una plataforma que conecta clientes con trabajadores independientes.
          ELIMAN no emplea trabajadores ni es responsable por su trabajo.
        </p>

        <h2 class="font-bold text-lg mb-2">2. Contratista independiente</h2>
        <p class="mb-4">
          Al usar la plataforma, confirmas que eres contratista independiente, no empleado.
          Eres responsable de impuestos, seguros, herramientas y gastos.
        </p>

        <h2 class="font-bold text-lg mb-2">3. Responsabilidad y riesgo</h2>
        <p class="mb-4">
          Trabajas bajo tu propio riesgo. ELIMAN no se hace responsable por da√±os,
          lesiones, p√©rdidas o disputas.
        </p>

        <h2 class="font-bold text-lg mb-2">4. Aceptaci√≥n de trabajos</h2>
        <p class="mb-4">
          Puedes aceptar o rechazar trabajos. ELIMAN no es responsable por cancelaciones
          ni comportamiento de los clientes.
        </p>

        <h2 class="font-bold text-lg mb-2">5. Pagos</h2>
        <p class="mb-4">
          El pago se realiza despu√©s de completar el trabajo. El fraude lleva a suspensi√≥n.
        </p>

        <h2 class="font-bold text-lg mb-2">6. Indemnizaci√≥n</h2>
        <p class="mb-4">
          Aceptas mantener a ELIMAN libre de reclamos, da√±os, lesiones o gastos
          derivados de tu trabajo.
        </p>

        <p class="mb-4">
          Al aceptar, confirmas que entiendes y asumes toda responsabilidad.
        </p>
      `
    }
  };

  // –ø—Ä–∏–º–µ–Ω—è–µ–º —è–∑—ã–∫
  title.textContent = i18n[lang].title;
  agreeLabel.textContent = i18n[lang].agree;
  nextBtn.textContent = i18n[lang].next;
  content.innerHTML = i18n[lang].content;

  // –ª–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏
  agree.addEventListener("change", () => {
    agree.checked
      ? nextBtn.classList.remove("btn-disabled")
      : nextBtn.classList.add("btn-disabled");
  });

  // UPDATE accepted_terms = true –∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ privacy
  nextBtn.addEventListener("click", async () => {
    if (!agree.checked) return;

    if (!workerId) {
      alert("Worker ID missing");
      return;
    }

    if (!window.db) {
      alert("Database connection error");
      return;
    }

    const { error } = await window.db
      .from("workers")
      .update({ accepted_terms: true })
      .eq("id", workerId);

    if (error) {
      console.error(error);
      alert("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã");
      return;
    }

    window.location.href = `privacy.html?id=${workerId}&lang=${lang}`;
  });
</script>

</body>
</html>